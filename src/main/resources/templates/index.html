<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <title>Employee Management System</title>
    <!-- âœ… Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
<div class="container">
    <h2>Employee Management System</h2>
    <p sec:authorize="isAuthenticated()">
        Logged in as: <strong sec:authentication="name"></strong>
    </p>
    <div class="d-flex justify-content-end mb-3">
        <form th:action="@{/logout}" method="post">
            <button class="btn btn-danger" type="submit">Logout</button>
        </form>
    </div>
    <a class="btn btn-primary mb-3" th:href="@{/showNewEmployeeForm}">Add Employee</a>
    <table class="table table-bordered">
        <thead>
        <tr>
            <th><a th:href="@{/page/1(sortField='firstName', sortDir=${reverseSortDir})}">First Name</a></th>
            <th><a th:href="@{/page/1(sortField='lastName', sortDir=${reverseSortDir})}">Last Name</a></th>
            <th><a th:href="@{/page/1(sortField='email', sortDir=${reverseSortDir})}">Email</a></th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="employee : ${listEmployees}">
            <td th:text="${employee.firstName}">First Name</td>
            <td th:text="${employee.lastName}">Last Name</td>
            <td th:text="${employee.email}">Email</td>
            <td>
                <a th:href="@{/showFormForUpdate/{id}(id=${employee.id})}">Edit</a> |
                <a th:href="@{/deleteEmployee/{id}(id=${employee.id})}">Delete</a>
            </td>
        </tr>
        </tbody>
    </table>

    <ul class="pagination">
        <li class="page-item" th:if="${currentPage > 1}">
            <a class="page-link" th:href="@{/page/{pageNo}(pageNo=${currentPage - 1}, sortField=${sortField}, sortDir=${sortDir})}">Previous</a>
        </li>
        <li class="page-item" th:each="i : ${#numbers.sequence(1, totalPages)}"
            th:classappend="${i == currentPage} ? 'active'">
            <a class="page-link"
               th:href="@{/page/{pageNo}(pageNo=${i}, sortField=${sortField}, sortDir=${sortDir})}"
               th:text="${i}">1</a>
        </li>
        <li class="page-item" th:if="${currentPage < totalPages}">
            <a class="page-link" th:href="@{/page/{pageNo}(pageNo=${currentPage + 1}, sortField=${sortField}, sortDir=${sortDir})}">Next</a>
        </li>
    </ul>

</div>
</body>
</html>
